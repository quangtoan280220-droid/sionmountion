<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Leo n√∫i Ph√∫ Sƒ© c√πng Samurai</title>
  <style>
    :root{
      --steps: 6;           /* s·ªë c√¢u h·ªèi */
      --step-height: 70px;  /* kho·∫£ng c√°ch m·ªói b∆∞·ªõc leo */
      --char-size: 64px;
      --sky: linear-gradient(#b3e5fc, #e1f5fe);
      --ground: #6db37f;
      --accent: #ffcc00;
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--sky);
      color: #222;
      display: grid;
      grid-template-columns: 1fr 420px;
      min-height: 100vh;
    }

    /* Khu v·ª±c game */
    .scene {
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      padding: 24px;
    }

    .ground {
      position: absolute;
      bottom: 0;
      left: 0; right: 0;
      height: 120px;
      background: var(--ground);
    }

    /* N√∫i Ph√∫ Sƒ© */
    .mountain {
      position: absolute;
      bottom: 120px;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      max-width: 800px;
      aspect-ratio: 16 / 9;       /* gi·ªØ ƒë√∫ng t·ªâ l·ªá ·∫£nh */
      background-image: url('fuji.jpg'); /* ·∫£nh n√∫i Ph√∫ Sƒ© */
      background-size: contain;   /* hi·ªÉn th·ªã to√†n b·ªô ·∫£nh */
      background-repeat: no-repeat;
      background-position: center bottom;
    }

    /* B·∫≠c leo */
    .step {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      width: 60%;
      height: 4px;
      background: rgba(255,255,255,.7);
      border-radius: 2px;
    }

    /* Nh√¢n v·∫≠t Samurai */
    .character {
      position: absolute;
      bottom: 120px;
      left: 50%;
      transform: translateX(-50%);
      width: var(--char-size);
      height: var(--char-size);
      background-image: url('samurai.png'); /* ·∫£nh nh√¢n v·∫≠t */
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      transition: bottom .5s ease;
    }

    /* UI b√™n ph·∫£i */
    .panel {
      background: #ffffffcc;
      backdrop-filter: blur(6px);
      border-left: 1px solid #ddd;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .title {
      font-weight: 700;
      font-size: 20px;
      text-align: center;
      color: #c62828;
    }

    .progress {
      display: flex;
      align-items: center;
      gap: 8px;
      justify-content: center;
    }
    .dot {
      width: 14px; height: 14px;
      border-radius: 50%;
      background: #ddd;
      border: 1px solid #bbb;
    }
    .dot.active { background: #4caf50; border-color: #2e7d32; }
    .dot.current { background: var(--accent); border-color: #c9a300; }

    .question {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 14px;
    }

    .answers {
      display: grid;
      gap: 10px;
      margin-top: 10px;
    }

    button.answer {
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid #ccc;
      background: #f7f7f7;
      cursor: pointer;
      text-align: left;
      transition: transform .05s ease, background .2s ease;
    }
    button.answer:hover { background: #eee; }
    button.answer:active { transform: scale(.98); }

    .controls {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }
    .btn {
      padding: 8px 12px;
      border-radius: 8px;
      border: 1px solid #bbb;
      background: #fafafa;
      cursor: pointer;
    }

    .toast {
      font-size: 14px;
      color: #444;
      min-height: 20px;
    }

    .win {
      position: absolute;
      top: 10%;
      left: 50%;
      transform: translateX(-50%);
      background: #ffffffee;
      border: 2px solid #4caf50;
      color: #2e7d32;
      padding: 12px 16px;
      border-radius: 10px;
      display: none;
      font-weight: 700;
    }
    .win.show { display: block; }

    @media (max-width: 900px) {
      body { grid-template-columns: 1fr; }
      .panel { border-left: none; border-top: 1px solid #ddd; }
      .mountain { width: 90%; }
    }
  </style>
</head>
<body>
  <div class="scene">
    <div class="ground"></div>
    <div class="mountain" id="mountain"></div>
    <div class="character" id="character"></div>
    <div class="win" id="winBanner">üéâ Samurai ƒë√£ l√™n ƒë·ªânh Ph√∫ Sƒ©!</div>
  </div>

  <aside class="panel">
    <div class="title">Leo n√∫i Ph√∫ Sƒ© c√πng Samurai</div>
    <div class="progress" id="progressDots"></div>
    <div class="question">
      <div id="questionText">C√¢u h·ªèi s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y.</div>
      <div class="answers" id="answers"></div>
      <div class="controls">
        <button class="btn" id="resetBtn">L√†m l·∫°i t·ª´ ƒë·∫ßu</button>
        <button class="btn" id="shuffleBtn">X√°o tr·ªôn ƒë√°p √°n</button>
      </div>
      <div class="toast" id="toast"></div>
    </div>
  </aside>

  <script>
    const questions = [
      { text: '1) Th·ªß ƒë√¥ Nh·∫≠t B·∫£n l√† g√¨?', options: ['Tokyo','Kyoto','Osaka'], correctIndex: 0 },
      { text: '2) N√∫i Ph√∫ Sƒ© cao kho·∫£ng bao nhi√™u m√©t?', options: ['2776','3776','4776'], correctIndex: 1 },
      { text: '3) Samurai th∆∞·ªùng g·∫Øn li·ªÅn v·ªõi lo·∫°i v≈© kh√≠ n√†o?', options: ['Katana','S√∫ng','Cung'], correctIndex: 0 },
      { text: '4) Hoa bi·ªÉu t∆∞·ª£ng c·ªßa Nh·∫≠t B·∫£n?', options: ['Hoa sen','Hoa anh ƒë√†o','Hoa h·ªìng'], correctIndex: 1 },
      { text: '5) Th√†nh ph·ªë t·ª´ng l√† c·ªë ƒë√¥ Nh·∫≠t B·∫£n?', options: ['Kyoto','Nagoya','Sapporo'], correctIndex: 0 },
      { text: '6) Sushi truy·ªÅn th·ªëng th∆∞·ªùng d√πng nguy√™n li·ªáu ch√≠nh n√†o?', options: ['C√° s·ªëng','Th·ªãt b√≤','Tr·ª©ng'], correctIndex: 0 }
    ];

    let current = 0;
    const total = questions.length;
    const characterEl = document.getElementById('character');
    const winBanner = document.getElementById('winBanner');
    const questionText = document.getElementById('questionText');
    const answersEl = document.getElementById('answers');
    const toastEl = document.getElementById('toast');
    const progressDots = document.getElementById('progressDots');
    const resetBtn = document.getElementById('resetBtn');
    const shuffleBtn = document.getElementById('shuffleBtn');

    function buildSteps() {
      document.querySelectorAll('.step').forEach(s => s.remove());
      progressDots.innerHTML = '';
      for (let i = 0; i < total; i++) {
        const step = document.createElement('div');
        step.className = 'step';
        step.style.bottom = (120 + (i+1)*70) + 'px';
        document.getElementById('mountain').appendChild(step);

        const dot = document.createElement('div');
        dot.className = 'dot';
        progressDots.appendChild(dot);
      }
      updateProgressDots();
    }

    function updateProgressDots() {
      const dots = progressDots.querySelectorAll('.dot');
      dots.forEach((d,i)=>{
        d.classList